<div  id="demo">
</div>
<button id="btn" style="position: absolute;top:10px;right:10px; width:50px;z-index:1001; display: none">
    close
</button>

<script>
let a = document.getElementById("shopify-section-announcement-bar");

let announceBar = document.getElementById("demo");
let button = document.getElementById("btn");
button.addEventListener("click",()=>{
 announceBar.style.display="none" 
button.style.display="none"
})

const url = `https://announce-bar-bcnd.herokuapp.com/get-script?shop=${window.location.hostname}`
fetch(url)
  .then(response => response.json())
  .then(data => {
      if(data.lenght===0){
         announceBar.style.display="none"
      }else{
         announceBar.innerHTML = data[0].content +data[0].shpingGoal;
       announceBar.style.cssText=`
        position:${data[0].position}; 
        top: 0; 
        left: 0 ; 
        height:40px;
        width:100%;
        background:${data[0].background};
        color:${data[0].fontColor};
        z-index:1000;
        font-size:${data[0].fontSize}px;
        font-family: ${data[0].fontFamily};
        display:flex;
        align-items:center;
        justify-content:center`
      }
      if(data[0].closeButton==="YES"){
        button.style.display="block"
      }
      if(data[0].position==="fixed"){
        button.style.position="fixed"
      }
  });
</script>

{% schema %}
  {
    "name": "App Embed",
    "target": "head",
    "settings": []
  }
{% endschema %}